name: Orchestrator

on:
  push:
  workflow_dispatch:

jobs:
  check_if_to_publish:
    uses: ./.github/workflows/check-if-to-publish.yml
    secrets: inherit

  ensure_readme:
    needs: check_if_to_publish
    uses: ./.github/workflows/ensure-readme.yml
    secrets: inherit

  update_citation:
    needs: ensure_readme
    uses: ./.github/workflows/update_citation.yml
    secrets: inherit
    
  convert_assets:
    needs: update_citation
    uses: ./.github/workflows/converter.yml
    secrets: inherit
  
  format_engineering_docs:
    needs: convert_assets 
    uses: ./.github/workflows/engineering-document-formatter.yml
    secrets: inherit
    
  gitbook_style_rename:
    needs: format_engineering_docs
    uses: ./.github/workflows/gitbook-style.yml
    secrets: inherit

  selective_publish_pdf:
    needs: gitbook_style_rename 
    uses: ./.github/workflows/publisher.yml
    secrets: inherit
