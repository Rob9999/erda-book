version: 0.1.0
profiles:
  default:
    description: Standardprofil f端r die komplette Orchestrator-Pipeline.
    steps:
      - check_if_to_publish
      - ensure_readme
      - update_citation
      - converter
      - engineering-document-formatter
      - publisher
    docker:
      use_registry: true
      image: ghcr.io/${repo}/publisher
      cache: true
  local:
    description: Lokale Ausf端hrung ohne Registry-Zugriff.
    steps:
      - converter
      - publisher
    docker:
      use_registry: false
  publisher:
    description: F端hrt nur den Publisher aus (z. B. f端r workflow_call).
    steps:
      - publisher
    docker:
      use_registry: true
      image: ghcr.io/${repo}/publisher
      cache: true
meta:
  publish_on:
    - push
    - workflow_dispatch
  artifacts:
    keep_days: 7
publish:
  - path: ./
    out_format: pdf
    out_dir: ./publish
    out: das-erda-buch.pdf
    source_type: folder
    source_format: markdown
    use_summary: true
    use_book_json: true
    summary_mode: gitbook
    summary_appendices_last: true
    keep_combined: true
    build: true
    reset_build_flag: false
    pdf_options:
      emoji_color: true
      main_font: "DejaVu Serif"
      sans_font: "DejaVu Sans"
      mono_font: "DejaVu Mono"
    assets:
      - path: ./.gitbook/assets
        type: images
        copy_to_output: true
